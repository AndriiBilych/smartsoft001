<ion-row>
    <ion-col>
        <ion-label>
            {{ item().label | translate }}
        </ion-label>

      @if (!advanced()) {
        <ion-input placeholder="YYYY-MM-DD"
                   [(ngModel)]="customValue"
                   [pattern]="'([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))'"
        ></ion-input>
      }
    </ion-col>

  @if (!advanced()) {
    <ion-col size="auto">
      <ion-button id="open-date-input-{{ id }}" class="square-button">
        <ion-icon slot="icon-only" name="calendar-outline"></ion-icon>
        <ion-popover trigger="open-date-input-{{ id }}" show-backdrop="false">
          <ng-template>
            <ion-datetime displayFormat="YYYY-MM-DD"
                          pickerFormat="YYYY-MM-DD"
                          [(ngModel)]="customValue"
                          presentation="date"
                          first-day-of-week="1"
                          locale="{{ lang }}"
            ></ion-datetime>
          </ng-template>
        </ion-popover>
      </ion-button>
    </ion-col>
  }
  @if (allowAdvanced) {
    <ion-col size="auto">
      <ion-button (click)="toggleAdvanced()" class="square-button" [disabled]="minValue || maxValue">
        @if (!advanced()) {
          <ion-icon slot="icon-only" name="settings-outline"></ion-icon>
        } @else {
          <ion-icon slot="icon-only" name="settings"></ion-icon>
        }
      </ion-button>
    </ion-col>
  }
  @if (value || minValue || maxValue) {
    <ion-col size="auto">
      <ion-button color="danger" (click)="clear()" class="square-button">
        <ion-icon slot="icon-only" name="close-outline"></ion-icon>
      </ion-button>
    </ion-col>
  }
</ion-row>

@if ((advanced() || minValue || maxValue) && allowAdvanced) {
  <ion-row>
    <ion-col>
      <ion-item>
        <ion-label>
          {{ 'from' | translate }}
        </ion-label>
        <ion-input placeholder="YYYY-MM-DD"
                   [(ngModel)]="customMinValue"
                   [pattern]="'([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))'"
        ></ion-input>
      </ion-item>
    </ion-col>
    @if (customMinValue) {
      <ion-col size="auto">
        <ion-button color="danger" (click)="refresh(null, '>=')" class="square-button">
          <ion-icon slot="icon-only" name="close-outline"></ion-icon>
        </ion-button>
      </ion-col>
    }
    <ion-col>
      <ion-item>
        <ion-label>
          {{ 'to' | translate }}
        </ion-label>
        <ion-input placeholder="YYYY-MM-DD"
                   [(ngModel)]="customMaxValue"
                   [pattern]="'([12]\\d{3}-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01]))'"
        ></ion-input>
      </ion-item>
    </ion-col>

    @if (customMaxValue) {
      <ion-col size="auto">
        <ion-button color="danger" (click)="refresh(null, '<=')" class="square-button">
          <ion-icon slot="icon-only" name="close-outline"></ion-icon>
        </ion-button>
      </ion-col>
    }
  </ion-row>
}
