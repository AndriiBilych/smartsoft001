<mat-vertical-stepper #stepper [linear]="true">
    <mat-step *ngFor="let step of steps; let first = first; let last = last" [stepControl]="step.form">
        <ng-template matStepLabel>{{ step.name | translate }}</ng-template>

        <ion-list class="smart-list">
            <ng-container *ngFor="let field of step.fields">
                <smart-input *ngIf="form.controls[field] && !form.controls[field]['__smartDisabled']" [options]="{
                    treeLevel: treeLevel,
                    fieldKey: field,
                    control: form.controls[field],
                    model: model,
                    mode: mode,
                    possibilities$: possibilities[field],
                    component: inputComponents[field]
                }"></smart-input>
            </ng-container>
        </ion-list>

        <div style="float: right">
            <button mat-button *ngIf="!first" matStepperPrevious>{{ 'prev' | translate }}</button>
            <button mat-button *ngIf="!last"  matStepperNext>{{ 'next' | translate }}</button>
        </div>
    </mat-step>
</mat-vertical-stepper>