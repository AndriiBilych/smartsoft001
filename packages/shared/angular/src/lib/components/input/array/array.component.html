@if (control) {
  <!--  <ion-label position="static">-->
  {{
    control?.parent?.value
      | smartModelLabel
        : internalOptions.fieldKey
        : internalOptions?.model?.constructor
      | async
  }}
  <!--    <ion-text color="danger">-->
  @if (required) {
    <span>*</span>
  }
  <!--    </ion-text>-->
  <!--  </ion-label>-->
  <!--  <ion-list-->
  <!--    class="max-w-full block overflow-hidden py-0 min-h-14 rounded"-->
  <!--    cdkDropList-->
  <!--    [cdkDropListDisabled]="fieldOptions?.possibilities?.static"-->
  <!--    (cdkDropListDropped)="drop($event)"-->
  <!--  >-->
  @for (options of childOptions; track options) {
    @let index = $index;
    <!--      <ion-item class="array-box p-0 flex flex-row items-center justify-between box-border text-sm bg-transparent shadow-none" lines="none" cdkDrag>-->
    @if (!fieldOptions?.possibilities?.static) {
      <!--          <ion-card class="w-full p-0 m-1">-->
      <smart-accordion [(show)]="options.show">
        <smart-accordion-header class="cursor-move">
          <!--                <ion-card-header class="m-0 p-0">-->
          <!--                  <ion-item class="m-0" lines="none">-->
          @if (
            !options.show &&
            options?.modelOptions?.titleKey &&
            options.control?.value[options.modelOptions!.titleKey!]
          ) {
            <!--                      <ion-label>-->
            {{
              options?.control?.value[options.modelOptions!.titleKey!]
                | translate
            }}
            <!--                      </ion-label>-->
          }
          <!--                    <ion-button-->
          <!--                      (click)="onRemove(index)"-->
          <!--                      size="small"-->
          <!--                      fill="outline"-->
          <!--                      slot="end"-->
          <!--                    >-->
          <!--                      <ion-icon name="close-outline"></ion-icon>-->
          <!--                    </ion-button>-->
          <!--                  </ion-item>-->
          <!--                </ion-card-header>-->
        </smart-accordion-header>
        <smart-accordion-body>
          <!--                <ion-card-content class="p-0">-->
          <!--          TODO: refactor usage of FormComponent and styles-->
          <ng-template
            [ngComponentOutlet]="formComponent"
            [ndcDynamicInputs]="{ options: options }"
          ></ng-template>
          <!--                </ion-card-content>-->
        </smart-accordion-body>
      </smart-accordion>
      <!--          </ion-card>-->
    } @else {
      <!--          <ion-card class="w-full p-0 m-1">-->
      <!--            <ion-card-content class="p-0">-->
      <ng-template
        [ngComponentOutlet]="formComponent"
        [ndcDynamicInputs]="{ options: options }"
      ></ng-template>
      <!--            </ion-card-content>-->
      <!--          </ion-card>-->
    }
    <!--      </ion-item>-->
  }
  <!--  </ion-list>-->
  @if (!fieldOptions?.possibilities?.static) {
    <smart-button [options]="addButtonOptions" class="float-right">
      <span style="font-weight: 300"
        >{{
          control?.parent?.value
            | smartModelLabel
              : internalOptions.fieldKey
              : internalOptions?.model?.constructor
            | async
        }}
        > &nbsp;</span
      ><b>{{ 'add' | translate }}</b>
    </smart-button>
  }
}
